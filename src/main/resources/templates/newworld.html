<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Metaverse-AFrame</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="/assets/img/apple-icon.png">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico">

    <!-- Load fonts style after rendering the layout styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;200;300;400;500;700;900&display=swap">
    <link rel="stylesheet" href="/assets/css/fontawesome.min.css">

    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.x/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.2/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-system@1.6.0/dist/aframe-physics-system.min.js"></script>


</head>

<body>
        <!-- 사용자 컴포넌트 등록 코드는 a-scene 전 body 안에 작성 
            The component name `userComponent` contains uppercase characters, 
            but HTML will ignore the capitalization of attribute names. 
            Change the name to be lowercase: `usercomponent`
        -->
        
        <script>        
           AFRAME.registerComponent('user-component', {
              schema: {
                tickRate: {type: 'number', default: 1}
              },          
              init: function () {
                console.log('initiated : ', this);
              },
              update: function () {},
              tick: function (time, timeDelta) {
                this.data.tickRate = this.data.tickRate + timeDelta;
                if( this.data.tickRate > 3000.0){
                    console.log('tick : ', time, timeDelta);
                    this.data.tickRate = 0;
                }
              },
              tock: function () {
              },
              remove: function () {},
              pause: function () {},
              play: function () {
                console.log('play : ', this);
              }
          });
        </script>

        
        <!-- Start scene    -->
<a-scene physics>
    <!-- assets management system -->
    <a-assets>
        <a-asset-item id="boss" src="/aframe/avatars/theboss/theboss.gltf"></a-asset-item>
    </a-assets>

    <a-camera position="0 1.6 0">
        <a-cursor></a-cursor>
    </a-camera>

    <a-sphere position="0 1.25 -5" radius="0.5" color="#EF2D5E" shadow="cast: true"
        user-component>
    </a-sphere>
            
    <a-entity 
        id="avatar" gltf-model="#boss" 
        position="-1 1 -2" rotation="0 180 0" scale="0.01 0.01 0.01"
        animation-mixer="clip: BreathingIdle; loop: repeat"
        >
    </a-entity>

    <a-entity environment="preset: forest; dressingAmount: 500"></a-entity>
</a-scene>
    <!-- End scene    -->    
    
    <!-- Start Script -->
    <script src="/assets/js/jquery-1.11.0.min.js"></script>
    <script src="/assets/js/jquery-migrate-1.2.1.min.js"></script>
    <script src="/assets/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/templatemo.js"></script>
    <!-- End Script -->

</body>

</html>